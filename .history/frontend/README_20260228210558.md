# SvelteKit Frontend for Authentication System

A productionâ€‘ready SvelteKit frontend that integrates with a Rustâ€‘based authentication API (Axum + PostgreSQL). It features a dark theme, modular UI components, and a robust authentication flow using HTTPâ€‘only cookies. Built with TypeScript, TailwindCSS, and designed for scalability.

---

## ğŸš€ Quick Start

```bash
# Clone the repository (if not already)
cd frontend

# Install dependencies
npm install

# Create .env file (see below)
cp .env.example .env

# Start development server
npm run dev

# Visit http://localhost:5173


---

## ğŸ“ Project Structure

```

frontend/
â”œâ”€â”€ .env.example
â”œâ”€â”€ package.json
â”œâ”€â”€ postcss.config.js          # Tailwind + Autoprefixer
â”œâ”€â”€ tailwind.config.js          # Tailwind theme & dark mode
â”œâ”€â”€ svelte.config.js            # SvelteKit adapter
â”œâ”€â”€ vite.config.ts              # Vite + Vitest config
â”œâ”€â”€ Dockerfile.dev
â”œâ”€â”€ Dockerfile.prod
â””â”€â”€ src/
    â”œâ”€â”€ app.html                # HTML entry with dark mode script
    â”œâ”€â”€ app.css                 # Tailwind imports
    â”œâ”€â”€ lib/
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â”œâ”€â”€ layout/
    â”‚   â”‚   â”‚   â”œâ”€â”€ Header.svelte    # Responsive header with theme toggle & auth nav
    â”‚   â”‚   â”‚   â””â”€â”€ Footer.svelte
    â”‚   â”‚   â”œâ”€â”€ ui/                  # Reusable UI components
    â”‚   â”‚   â”‚   â”œâ”€â”€ Button.svelte
    â”‚   â”‚   â”‚   â”œâ”€â”€ Card.svelte
    â”‚   â”‚   â”‚   â”œâ”€â”€ Input.svelte
    â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.svelte
    â”‚   â”‚   â”‚   â””â”€â”€ Alert.svelte
    â”‚   â”‚   â”œâ”€â”€ auth/                 # Authentication forms
    â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.svelte
    â”‚   â”‚   â”‚   â””â”€â”€ RegisterForm.svelte
    â”‚   â”‚   â””â”€â”€ shared/                # (future shared utilities)
    â”‚   â”œâ”€â”€ stores/                    # Global state
    â”‚   â”‚   â”œâ”€â”€ theme.ts                # Dark mode store with localStorage
    â”‚   â”‚   â””â”€â”€ auth.ts                 # Real authentication store (API calls)
    â”‚   â””â”€â”€ types/                       # TypeScript type definitions
    â””â”€â”€ routes/
        â”œâ”€â”€ +layout.svelte               # Global layout (Header, Footer, main)
        â”œâ”€â”€ +page.svelte                  # Landing page
        â”œâ”€â”€ auth/
        â”‚   â”œâ”€â”€ login/
        â”‚   â”‚   â””â”€â”€ +page.svelte          # Login page
        â”‚   â””â”€â”€ register/
        â”‚       â””â”€â”€ +page.svelte          # Register page
        â”œâ”€â”€ profile/
        â”‚   â””â”€â”€ +page.svelte              # Protected profile page
        â””â”€â”€ __tests__/                     # Unit tests
            â””â”€â”€ Button.test.ts

```

---

## ğŸ” Authentication (Real)

The authentication logic lives in `stores/auth.ts`. It communicates with the Rust backend using `fetch` with `credentials: 'include'` to handle HTTPâ€‘only cookies. The store exposes:

- `user`: `User | null` â€“ contains `{ id, username, created_at }`
- `loading`: `boolean`
- `error`: `string | null`
- `login(email, password)`
- `register(email, password, name?)`
- `logout()`

### Environment Variable

The API base URL is read from `VITE_API_URL` (set in `.env`). Example:

```

VITE_API_URL=http://localhost:8000

```

### Key Implementation Details

- On app load, the store calls `/profile` to restore an existing session.
- All requests include `credentials: 'include'` to send/receive cookies.
- After login, the user object is fetched from `/profile` and stored.
- Registration automatically logs the user in (calls `login`).
- Logout calls `/logout` and clears the store.

See the full store code in `src/lib/stores/auth.ts`.

---

## ğŸ¨ Design System & Dark Mode

- Dark mode uses Tailwind's `class` strategy. The theme store (`stores/theme.ts`) toggles the `dark` class on `<html>` and persists the preference in `localStorage`.
- An inline script in `app.html` prevents a flash of light mode.
- The color palette is defined in `tailwind.config.js` under the `primary` key â€“ easily customisable.

---

## ğŸ§© UI Components

All components are in `src/lib/components/ui/`. They are designed to be reusable, accessible, and support dark mode via Tailwind's `dark:` variants. Refer to the previous section for detailed component APIs.

---

## ğŸ§ª Testing

Vitest + Testing Library are configured. Tests are coâ€‘located in `__tests__` folders. Run with:

```bash
npm run test
npm run test:ui   # with UI
```

---

## ğŸ›  Integration with Backend

### CORS

The Rust backend must allow your frontend origin. In development, it is typically configured to accept `http://localhost:5173`. The backend also sets `Access-Control-Allow-Credentials: true`.

### Cookie Settings

The backend sets cookies with `HttpOnly`, `Secure` (in production), and appropriate `Max-Age` based on token expiration. The frontend does not need to read them; they are automatically sent with each request.

### Protected Routes

The `/profile` page is protected: if `$auth.user` is null and not loading, it redirects to login. The header also conditionally shows navigation based on auth state.

---

## ğŸ³ Docker Development

The frontend is containerised for seamless integration with the full stack. A `docker-compose.yml` at the project root orchestrates:

- `postgres`: database
- `rust_api`: backend (Rust)
- `frontend`: this SvelteKit app

To run the entire stack:

```bash
docker-compose up --build
```

The frontend will be available at `http://localhost:8080` (or `5173` depending on your compose configuration). Hotâ€‘reload works via mounted volumes.

---

## ğŸ“¦ Building for Production

This template uses `@sveltejs/adapter-auto`; for a static backend you may want to switch to `adapter-node` or `adapter-static`. Build with:

```bash
npm run build
```

For Docker, use `Dockerfile.prod` which runs a multiâ€‘stage build and serves with a lightweight server.

---

## ğŸ”§ Customization Guide

### Changing the Accent Color

Edit `tailwind.config.js` â€“ modify the `primary` color palette.

### Adding a New Page

Create a folder under `src/routes/` with a `+page.svelte`. Use the layout to include header/footer automatically.

### Modifying the Auth Flow

Update `stores/auth.ts` to add new endpoints (e.g., password reset). Keep the same store interface to preserve component compatibility.

### Environment Variables

All clientâ€‘side environment variables must be prefixed with `VITE_`. Add them to `.env` and restart the dev server.

---

## ğŸ“š Learn More

- [SvelteKit Documentation](https://kit.svelte.dev/docs)
- [TailwindCSS](https://tailwindcss.com/docs)
- [Vitest](https://vitest.dev)

---

## ğŸ“„ License

MIT

```
